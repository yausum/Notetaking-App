{% extends "base.html" %}

{% block title %}{{ note['title'] }} - Note Taking App{% endblock %}

{% block content %}
<div class="note-view">
    <div class="note-header">
        <div>
            <h1 class="note-title-large">{{ note['title'] }}</h1>
            <div class="note-metadata">
                {% if note['category'] %}
                    <span class="category-badge-large">{{ note['category'] }}</span>
                {% endif %}
                <span class="note-date-large">Created: {{ note['created_at'] }}</span>
                {% if note['updated_at'] != note['created_at'] %}
                    <span class="note-date-large">Updated: {{ note['updated_at'] }}</span>
                {% endif %}
            </div>
        </div>
        <div class="note-header-actions">
            <a href="{{ url_for('edit_note', id=note['id']) }}" class="btn-primary">Edit</a>
            <button class="btn-danger" onclick="confirmDelete({{ note['id'] }})">Delete</button>
        </div>
    </div>

    <div class="note-content-display">
        {{ note['content']|replace('\n', '<br>')|safe }}
    </div>

    <div class="note-footer">
        <a href="{{ url_for('index') }}" class="btn-back">‚Üê Back to Notes</a>
    </div>
</div>

<form id="deleteForm" method="POST" style="display: none;">
</form>
{% endblock %}

{% block scripts %}
<script>
function confirmDelete(noteId) {
    if (confirm('Are you sure you want to delete this note? This action cannot be undone.')) {
        const form = document.getElementById('deleteForm');
        form.action = `/delete/${noteId}`;
        form.submit();
    }
}
</script>
{% endblock %}
